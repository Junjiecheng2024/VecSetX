大项目名：基于隐式神经场的多类心脏结构 关联推断 与 鲁棒补全 框架

（当前环境是本地环境，可以修改代码，我通过GitHub手动同步到集群上，然后手动在集群上运行。本地无数据集，所以不能运行终端命令。）
我们现在正在做心脏结构的重建任务，利用VecSetX模型进行心脏结构的重建。以下为详细行动计划：

行动计划（Action Plan）
阶段 0：基础模型训练（单类重建）
先用一个类实现重建。


阶段 1：基础模型训练（多类重建）
目标：让模型先学会从完整的 10 类结构中进行隐式表征与重建。
步骤：
将每个病例的 10 类 segmentation mask 转换为适用于 VecSetX 的输入格式（点云表示）。
训练 VecSetX 的多类 autoencoder，使模型实现“输入 10 类结构，输出 10 类结构”的完整重建。
验证模型是否能够稳定地重建全心结构，确保 latent set 与 decoder 学习到了足够的心脏形状表达能力。
输出：一个能够稳定处理 10 类全心结构的 Encoder + Decoder（隐式神经场）。

阶段 2：补全任务训练（部分输入，完整输出）
目标：让模型掌握从部分结构推理完整全心结构的能力。
步骤：
在现有完整 10 类数据集上人为构造 partial masks，例如随机移除 2 至 5 个类，或按类别设计特定缺失方案。
使用“输入部分结构，输出完整结构”的方式训练模型（partial to full）。
确保模型能够根据输入的 incomplete 心脏形状推理出缺失的结构。
输出：具备补全过程能力的模型版本。

创新点 A (Phase 2): 概率补全 (Probabilistic Completion)
核心：不是训练一个“重建器”，而是训练一个“形状推断器”。
亮点：利用 Jitter 增强的 SDF 场，让模型学会了从残缺输入（Partial Input）中“脑补”出符合解剖学规律的完整心脏。这解决了临床上超声/CT视野受限的问题。

阶段 3：跨数据集知识迁移（天然残缺补全）
目标：利用多数据集的"天然残缺"特性，验证模型的跨数据集知识迁移和少样本补全能力。
核心思想：
继承 Phase 2 的补全能力，但不再人为丢弃类别。
集成多个异构数据集（Dataset A：10 类基础集，Dataset B：部分重叠 + 新增类），每个数据集相对于全集都是"天然残缺"的。
通过 Masked Loss 策略，在同一 Batch 中混合训练不同类别覆盖的数据，避免标签冲突和知识遗忘。
关键挑战：数据量占主导的 Dataset A 能否推断出仅在少样本 Dataset B 中出现的新类？这是数据不平衡下的少样本补全问题。
输出：验证跨数据集补全泛化能力，为 Phase 4 的真实临床残缺补全提供更全面的知识库。

创新点 B (Phase 3): 跨数据集知识迁移 (Cross-Dataset Knowledge Transfer)
核心：利用异构数据集的"天然残缺"，无需人为构造 Partial Input。
亮点：测试模型能否从一个数据集（如 Dataset A，占 95% 训练数据）推断出仅在另一个小样本数据集（Dataset B，占 5%）中出现的新结构。这不仅是类别扩展，更是验证模型在数据不平衡、异构标注场景下的补全鲁棒性，为跨医疗中心、跨成像协议的实际应用奠定基础。

阶段 4：真实 partial label 学习
目标：将补全过程推广到真实只标注部分结构的数据，使模型能在实际应用中完成全心补全。
步骤：
收集真实的部分标注数据集合（例如某些病例只标注 5 类、或外部数据集标注较少的结构）。
将这些部分标注作为输入，通过前面训练过的模型进行补全训练或微调。
验证模型在真实 partial label 场景下的补全效果。
输出：一个能在真实临床或跨数据集场景中，自动从部分标注推理完整全心结构的模型。

创新点 C (Phase 4): 真实场景适配
核心：从人工构造的 Partial 到真实的 Clinical Partial。
亮点：验证了方法的实战价值。

最终目标
通过以上四个阶段，构建一个具备以下能力的系统：
能表达完整 10 类心脏结构的隐式表征模型。
能从不完整结构恢复完整心脏。
能处理跨数据集、不同结构子集的输入。
能在真实部分标注场景中实现全心补全。




/home/user/persistent/VecSetX/original_VecSetX这个目录永远不要动
---------------------------------------------------------------------------------

各类别：
1 : Myocardium : The muscle tissue surrounding the left ventricle blood pool
2 : LA : The left atrium blood pool
3 : LV : The left ventricle blood pool including the papilary muscles and trabeculation
4 : RA : The right atrium blood pool
5 : RV : The right ventricle blood pool
6 : Aorta : The aorta including the aortic cusp
7 : PA : The pulmonary artery
8 : LAA : The left atrial appendage
9 : Coronary : The left and right coronary arteries
10 : PV : The pulmonary veins



---------------------------------------------------------------------------------
当前状态

集群排队太久了，还不如本地单卡慢慢跑
现在在生成p0的数据集，进行本地P0的训练
p0结果:

接下来本地测试p1
